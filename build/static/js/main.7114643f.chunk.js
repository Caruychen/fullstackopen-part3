(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(2),r=t.n(c),a=t(15),o=t.n(a),u=(t(20),t(5)),s=t(3),i=t(0),d=function(e){var n=e.handleSearchChange;return Object(i.jsxs)("div",{children:["filter shown with",Object(i.jsx)("input",{onChange:n})]})},j=function(e){var n=e.text,t=e.value,c=e.onChange;return Object(i.jsxs)("div",{children:[n,Object(i.jsx)("input",{value:t,onChange:c})]})},b=function(e){return Object(i.jsxs)("form",{onSubmit:e.addPerson,children:[Object(i.jsx)(j,{text:"name:",value:e.newName,onChange:e.handleNameChange}),Object(i.jsx)(j,{text:"number:",value:e.newNumber,onChange:e.handleNumberChange}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){var n=e.person,t=e.deletePerson;return Object(i.jsxs)("p",{children:[n.name," ",n.number," ",Object(i.jsx)("button",{onClick:t,children:"delete"})]})},h=function(e){var n=e.persons,t=e.deletePerson;return Object(i.jsx)("div",{children:n.map((function(e){return Object(i.jsx)(l,{person:e,deletePerson:t(e)},e.name)}))})},f=function(e){var n=e.message;return null===n?null:Object(i.jsx)("div",{className:"notification ".concat(n.status),children:n.text})},m=t(4),O=t.n(m),x="/api/persons",v=function(){return O.a.get(x).then((function(e){return e.data}))},p=function(e){return O.a.post(x,e).then((function(e){return e.data}))},g=function(e){return O.a.put("".concat(x,"/").concat(e.id),e).then((function(e){return e.data}))},w=function(e){return O.a.delete("".concat(x,"/").concat(e))},C=function(){var e=Object(c.useState)([]),n=Object(s.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),o=Object(s.a)(a,2),j=o[0],l=o[1],m=Object(c.useState)(""),O=Object(s.a)(m,2),x=O[0],C=O[1],N=Object(c.useState)(""),S=Object(s.a)(N,2),k=S[0],P=S[1],y=Object(c.useState)(null),D=Object(s.a)(y,2),E=D[0],I=D[1];Object(c.useEffect)((function(){v().then((function(e){return r(e)}))}),[]);var J=function(e){if(window.confirm("".concat(j," is already added to phonebook, replace the old number with a new one?"))){var n=Object(u.a)(Object(u.a)({},e),{},{number:x});g(n).then((function(e){r(t.map((function(t){return t.id!==n.id?t:e}))),L("success","".concat(j," updated"))})).catch((function(e){404===e.response.status&&(r(t.filter((function(e){return e.id!==n.id}))),L("error","Information of ".concat(j," has already been removed from server")))}))}},L=function(e,n){I({status:e,text:n}),setTimeout((function(){I(null)}),5e3)},B=t.filter((function(e){return e.name.toLowerCase().includes(k.toLowerCase())})),M={addPerson:function(e){e.preventDefault();var n=t.find((function(e){return e.name===j}));n?J(n):p({name:j,number:x}).then((function(e){r(t.concat(e)),L("success","".concat(j," added"))})),l(""),C("")},newName:j,handleNameChange:function(e){l(e.target.value)},newNumber:x,handleNumberChange:function(e){C(e.target.value)}};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(f,{message:E}),Object(i.jsx)(d,{handleSearchChange:function(e){P(e.target.value)}}),Object(i.jsx)("h3",{children:"add a new"}),Object(i.jsx)(b,Object(u.a)({},M)),Object(i.jsx)("h3",{children:"Numbers"}),Object(i.jsx)(h,{persons:B,deletePerson:function(e){return function(){window.confirm("Delete ".concat(e.name,"?"))&&(w(e.id).then((function(n){L("success","".concat(e.name," deleted from server."))})).catch((function(n){404===n.response.status&&L("error","".concat(e.name," was already deleted from server."))})),r(t.filter((function(n){return n.id!==e.id}))))}}})]})};o.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(C,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.7114643f.chunk.js.map